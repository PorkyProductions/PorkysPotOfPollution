---
import Layout from "../layouts/Layout.astro";
import "bootstrap/dist/css/bootstrap.css";
import Footer from "../components/footer.svelte";
import StarRater from "../components/starRater.svelte";

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob("./data/*.{md,mdx,markdown}")).sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).valueOf() -
    new Date(a.frontmatter.pubDate).valueOf()
);

---

<!DOCTYPE html>
<html lang="en">
  <head>
    <Layout
      title={"Blog"}
      description={"The Blog of Porkys Pot of Pollution"}
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
    <main class="bg-theme-darkRed">
      <section class="m-auto">
        <ul class="grid grid-cols-3 portrait:grid-cols-1 p-4">
          {
            posts.map((post) => (
              <li>
                <div class="card p-4" style="width: 300px;">
                  <!--image of article-->
                  <div style="justify-content:center">
                    <img
                      src={post.frontmatter.heroImage}
                      alt="the main image of the article"
                      style="max-height:100px; max-width: 100px;display: block;margin-left: auto; margin-right: auto;"
                    />
                  </div>
                  <!--title / headline-->
                  <div class="card-body" style="height: 200px">
                    <a
                      href={post.url}
                      class="card-title font-headliner card-link"
                    >
                      {post.frontmatter.title}
                    </a>
                    <p class="p-4 text-size: 18px">
                      {post.frontmatter.description}
                    </p>
                  </div>
                  <br />
                  <!--author of article -->
                  <p class="font-bold font-primary">
                      {post.frontmatter.author}
                    </p>
                  <div class="float-container">
                    <!--date / last updated-->
                    <span class="float-child">
                      
                      <time
                        datetime={post.frontmatter.pubDate}
                        style="font-size: 12px"
                      >
                        {new Date(post.frontmatter.pubDate).toLocaleDateString(
                          "en-us",
                          {
                            year: "numeric",
                            month: "short",
                            day: "numeric",
                          }
                        )}

                      </time>
                    </span>
                    <!--star rating system-->
                    <StarRater numOfStars={post.frontmatter.rating}/>

                  </div>
                </div>
              </li>

            ))
          }
        </ul>
      </section>
    </main>
    <Footer />
    
    <style>
      .checked {
         color: darkgoldenrod;
      }
      
    </style>
    
  </body>
</html>
